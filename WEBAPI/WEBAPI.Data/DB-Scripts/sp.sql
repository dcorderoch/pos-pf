-- STORED PROCEDURE TO UPDATE
-- THE TIME OF A SALE
CREATE PROCEDURE UPDATESALEEND
@SaleID BIGINT
AS
BEGIN
    UPDATE Sale
	SET EOF = CURRENT_TIMESTAMP
	WHERE SaleID = @SaleID
END

-- STORED PROCEDURE TO START A SALE
-- RETURNS Sale ID
CREATE PROCEDURE STARTSALE
    @CustomerID CHAR(9),
    @CashierID INT,
    @OfficeID TINYINT,
    @ThisSaleID BIGINT OUTPUT
AS
BEGIN
    SET NOCOUNT ON

    INSERT INTO Sale(IDNumber,StaffID,BOfficeID,STARTOF,EOF)
    VALUES ('000000000',1001,1,'2016-06-01 6:34:12 AM','2016-06-01 6:40:12 AM'),
       ('115020180',1002,2,'2016-06-01 6:34:12 AM','2016-06-01 6:40:12 AM');

	SET NOCOUNT ON
	BEGIN TRY
    	DELETE FROM Doctor WHERE DoctorId =@docCode
	END TRY
	BEGIN CATCH
		SET @errorNum = Error_Number()
		SET @result=0
		RETURN
	END CATCH
	SET @result = 1
	RETURN
END
GO